# クラスについて復習（Ruby)

## インスタンス変数の注意点

作成されていない変数を参照しようとすると

- ローカル変数 → エラーが発生
- インスタンス変数 → nil が返る（エラーにならない）

## self を省略できないもの

セッターメソッドには必ず`self`をつける必要がある（でないとローカル変数として認識される）

- クラスメソッド内の`self`はクラス自身を表す
- インスタンスメソッド内の`self`は、そのインスタンス自身を表す

## クラスメソッド内でインスタンスメソッドを使う

クラスメソッド内でインスタンスメソッドを呼び出す場合は、以下のように書けば良い

```ruby
クラス名.メソッド

# もしくは

self.class.メソッド
```

## 継承関係を確認するメソッド

`instance_of?` → レシーバーが引数に渡したクラスのインスタンスかどうかを boolean で返す

```ruby
post = Post.new
post.instance_of?(Post) # => true
```

`is_a?` → レシーバーが引数に渡したクラスと継承関係にあるのかどうかを boolean で返す

```ruby
post = Post.new
post.is_a?(Post) # => true
```

## private メソッド

- private メソッドは、「そのクラス内でしか使えないメソッド」ではなくて「レシーバーを指定して呼び出すことのできないメソッド」（これがクラスの外から呼び出せない理由）
- そして、private メソッドはサブクラスにも継承されるので、サブクラスでも呼び出せる
- クラスメソッドは`private`配下に置いても private メソッドにならない、代わりに`class << self`を使う必要がある

## protected メソッド

`protected`メソッドはそのメソッドを定義したクラス自身と、そのサブクラスのインスタンスメソッドからレシーバ付きで呼び出せる

## クラスインスタンス変数

インスタンス変数とクラスインスタンス変数は別物（クラス自身が保持ているデータと、インスタンス毎に管理される変数の違い）

## クラス変数

クラス変数はメソッド内、インスタンスメソッド内、更にスーパークラスとサブクラスでも共有される
