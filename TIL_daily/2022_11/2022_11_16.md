# 現場 Rails の読み返したメモ

アプリケーション開発が進むにつれ、複雑度が上がっていく

複雑なものをシンプルにすることはできないが、コードを書く技術によって複雑性に対応することができる

複雑性に対応するために有効なこと

1. 適切な場所にコードを書く
2. 上手に共通化する
3. 新しい構造を追加して役割を分担する

コントローラーは多用な処理が交差するので複雑さが集中しやすい（画面やビジネスロジック）ので肥大化しやすい

モデルに書くべきコードをモデルに寄せる

例：

- params の形を変形して保存したい場合 → モデルに受け口を用意し保存できる形に変形させ、一括で保存するのはコントローラーで一括でおこなう
- モデルインスタンスの内部状態を変更する場合 → コープバックやインスタンスメソッドなどを定義する、そのメソッドを呼び出すだけで処理できるようにする
- モデルの検索条件を作りこむ → scope で定義する
