## 今日の成果

- インスタクローンアプリの「メール通知機能」を実装し提出
- インスタクローンアプリの「メールのジョブの永続化」を実装し提出
- ポートフォリオレビュー会に参加

## 学んだこと

- 404などのエラー画面の表示はpublicディレクトリ配下で編集できる（本番環境だと大事）

### ポリモーフィック関連について

- 「どのテーブルのどのレコード(id)に紐づくのか」という情報をテーブルに持たせてしまうという方法
- SQLアンチパターンでも取り上げられている
- ポリモーフィック関連は単に関連の定義を省力化するためのものではないので安易な使用は避ける
- インターフェースに対する関連の定義だということを理解して使用する
- 境界の外からそのクラスを触る場合、それの詳細に立ち入らずにクラス自身の持っている情報に判断させるのが良い
- ポリモーフィック関連にした時にはインターフェースが目に見えて分かるようにしておくのが良い
- ポリモーフィックの関連名でモジュールを作ってそこに振舞いのデフォルト実装を書き、各クラスでincludeする（各クラスで必要ならそのメソッドをオーバーライドする）
- 振舞いは各クラスが知っていて外からはそれを呼ぶだけにして、処理の分岐はポリモーフィズムに任せる

### ジョブの永続化について

- メールなどの負荷がかかる処理は非同期処理にすることがほとんど
- ジョブが消える可能性があるのでredisサーバーにうつして実行すると良い
- ジョブをredisサーバーに移したり、redisサーバーからジョブを引っ張ってきて実行するのがsidekiq
