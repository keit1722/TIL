## 今日の成果

- 「下位 10％のダメなエンジニアにだけ解けないパズル」（https://jabba.cloud/20151130122814）を解いた
- 「現場で使える Ruby on Rails 5 速習実践ガイド」の chapter4-5 まで完了

## 学んだこと

- バリデーションはモデルに記述する
- 検証エラーは `errors.full_messages` で確認できる
- `persisted?`メソッドで、オブジェクトが DB に保存済みかどうか確認できる
- バリデーションは検証用ヘルパーだけではなく自分のオリジナルのものを書くこともできる
- モデルで検証を行わないメソッドもいくつかあるので注意（`#update_attribute`、`#update_column`、`#update_columns`、`.update_all` など）
- 検証、登録、更新、削除などのイベント前後に任意の処理を挟むことができる仕組みを「コールバック」と呼ぶ（「このタイミングが来たらこの処理を呼ぶ」というように、後ほど呼んでほしい処理を予め指定しておく仕組み）
- Rails ではコールバック全体を 1 つのトランザクションで囲って save を実行するので、コールバックで 1 つで例外が発生するとロールバック（処理の取り消し）が発生して以降のコールバックは実行されない
- セッションはアプリケーションサーバー側の仕組み。Cookie はブラウザと Web サーバー間でやり取りされる仕組み
- Rails ではセッションデータの保管場所がデフォルトで Cookie になっているもでプラウザ側で Cookie データを消せばセッションはリセットされる
- セッションはハッシュのように扱うことができる。例：`session[:user_id]`
- ログイン機能などでパスワードを扱う際は、属性名を`password_digest`にする（has_secure_password）を使う際に必要
- has_secure_password を使うためには bcrypt という gem が必要（gem はデフォルトで Gemfile にコメントアウトされている）
- has_secure_password はモデルに `has_secure_password` と記述するだけ
